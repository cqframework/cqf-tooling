<PlanDefinition xmlns="http://hl7.org/fhir">
  <id value="plandefinition-us-ecr-specification"></id>
  <meta>
  <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/ersd-plandefinition"></profile>
  <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-plandefinition"></profile>
  </meta><text>
    <status value="generated"></status>
    <div xmlns="http://www.w3.org/1999/xhtml">
      <p><b>Generated Narrative</b></p>
      <div style="display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%">
        <p style="margin-bottom: 0px">Resource "plandefinition-ersd-instance-example" Version "6" Updated "2021-11-17T04:21:04.738Z" </p>
        <p style="margin-bottom: 0px">Information Source: #DYpZHR1G1x5B4mFC!</p>
        <p style="margin-bottom: 0px">Profile: <a href="StructureDefinition-ersd-plandefinition.html">eRSD PlanDefinition</a></p>
      </div>
      <p><b>url</b>: <code>http://hl7.org/fhir/us/ecr/PlanDefinition/plandefinition-ersd-instance-example</code></p>
      <p><b>version</b>: 2.0.0</p>
      <p><b>name</b>: PlanDefinition_eRSD_Instance_Example</p>
      <p><b>title</b>: eRSD PlanDefinition Instance Example</p>
      <p><b>type</b>: Workflow Definition <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a
            href="http://terminology.hl7.org/3.0.0/CodeSystem-plan-definition-type.html">PlanDefinitionType</a>#workflow-definition)</span></p>
      <p><b>status</b>: active</p>
      <p><b>experimental</b>: true</p>
      <p><b>date</b>: 2020-07-31T12:32:29.858-05:00</p>
      <p><b>publisher</b>: HL7 Public Health Work Group (http://www.hl7.org/Special/committees/pher/index.cfm)</p>
      <p><b>contact</b>: HL7 International - Public Health: <a href="http://www.hl7.org/Special/committees/pher">http://www.hl7.org/Special/committees/pher</a></p>
      <p><b>description</b>: An example ersd PlanDefinition</p>
      <p><b>jurisdiction</b>: United States of America <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (unknown#US)</span></p>
      <p><b>effectivePeriod</b>: 2020-12-01 --&gt; (ongoing)</p>
      <blockquote>
        <p><b>action</b></p>
        <p><b>description</b>: This action represents the start of the reporting workflow in response to the encounter-start event</p>
        <p><b>textEquivalent</b>: Start the reporting workflow in response to an encounter-start event</p>
        <p><b>code</b>: Initiate a reporting workflow <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health PlanDefinition Action
              Codes</a>#initiate-reporting-workflow)</span></p>
        <h3>RelatedActions</h3>
        <table class="grid">
          <tr>
            <td>-</td>
            <td><b>ActionId</b></td>
            <td><b>Relationship</b></td>
            <td><b>Offset[x]</b></td>
          </tr>
          <tr>
            <td>*</td>
            <td>check-reportable</td>
            <td>before-start</td>
            <td>60 s<span style="background: LightGoldenRodYellow"> (Details: UCUM code s = 's')</span></td>
          </tr>
        </table>
      </blockquote>
      <blockquote>
        <p><b>action</b></p>
        <p><b>description</b>: This action represents the check for suspected reportability of the eICR.</p>
        <p><b>textEquivalent</b>: Check Reportability and setup jobs for future reportability checks.</p>
        <p><b>code</b>: Execute a series of actions to accomplish reporting <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health
              PlanDefinition Action Codes</a>#execute-reporting-workflow)</span></p>
        <blockquote>
          <p><b>action</b></p>
          <p><b>description</b>: This action represents the check for reportability to create the patients eICR.</p>
          <p><b>textEquivalent</b>: Check Trigger Codes based on RCTC Value sets.</p>
          <p><b>code</b>: Evaluate candidate patient's data against trigger codes to determine reportability <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a
                href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health PlanDefinition Action Codes</a>#check-trigger-codes)</span></p>
        </blockquote>
        <blockquote>
          <p><b>action</b></p>
          <p><b>code</b>: Evaluate condition to determine reportability <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health
                PlanDefinition Action Codes</a>#evaluate-condition)</span></p>
        </blockquote>
        <blockquote>
          <p><b>action</b></p>
          <p><b>code</b>: Evaluate condition to determine reportability <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health
                PlanDefinition Action Codes</a>#evaluate-condition)</span></p>
        </blockquote>
      </blockquote>
      <blockquote>
        <p><b>action</b></p>
        <p><b>description</b>: This action represents the creation, validation and submission of the eICR.</p>
        <p><b>textEquivalent</b>: Create, Validate and Report eICR set of actions</p>
        <p><b>code</b>: Execute a series of actions to accomplish reporting <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health
              PlanDefinition Action Codes</a>#execute-reporting-workflow)</span></p>
        <blockquote>
          <p><b>action</b></p>
          <p><b>description</b>: This action represents the creation of the eICR.</p>
          <p><b>textEquivalent</b>: Create eICR</p>
          <p><b>code</b>: Create a Report containing Patient's data for patients who passed the check-reportability test <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a
                href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health PlanDefinition Action Codes</a>#create-report)</span></p>
        </blockquote>
        <blockquote>
          <p><b>action</b></p>
          <p><b>description</b>: This action represents the validation of the eICR.</p>
          <p><b>textEquivalent</b>: Validate eICR</p>
          <p><b>code</b>: Validate Report against specified profiles and terminologies. <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public
                Health PlanDefinition Action Codes</a>#validate-report)</span></p>
        </blockquote>
        <blockquote>
          <p><b>action</b></p>
          <p><b>description</b>: This action represents the routing and sending of the eICR.</p>
          <p><b>textEquivalent</b>: Route and send eICR</p>
          <p><b>code</b>: Submit the report to specified endpoint <span style="background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki"> (<a href="CodeSystem-us-ph-plandefinition-actions.html">US Public Health PlanDefinition
                Action Codes</a>#submit-report)</span></p>
        </blockquote>
      </blockquote>
    </div>
  </text>
  <url value="http://ersd.aimsplatform.org/fhir/PlanDefinition/us-ecr-specfication"></url>
  <version value="0.1"></version>
  <name value="US_eCR_Specification"></name>
  <title value="US eCR Specification"></title>
  <type>
    <coding>
      <system value="http://terminology.hl7.org/CodeSystem/plan-definition-type"></system><code value="workflow-definition"></code>
      <display value="Workflow Definition"></display>
    </coding>
  </type>
  <status value="active"></status>
  <experimental value="true"></experimental>
  <date value="2022-01-13T16:10:30.556-05:00"></date>
  <publisher value="eCR"></publisher>
  <contact>
    <name value="HL7 International - Public Health"></name>
    <telecom>
      <system value="url"></system>
      <value value="http://www.hl7.org/Special/committees/pher"></value>
    </telecom>
  </contact>
  <description value="An example ersd PlanDefinition"></description>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"></system><code value="US"></code>
      <display value="United States of America"></display>
    </coding><text value="United States of America"></text>
  </jurisdiction>
  <effectivePeriod>
    <start value="2022-01-12"></start>
  </effectivePeriod>
  <relatedArtifact>
    <type value="depends-on"></type><label value="RCTC Value Set Library of Trigger Codes"></label>
    <resource value="http://ersd.aimsplatform.org/fhir/Library/rctc"></resource>
  </relatedArtifact>
  <action id="start-workflow">
    <description value="This action represents the start of the reporting workflow in response to the encounter-start event"></description>
    <textEquivalent value="Start the reporting workflow in response to an encounter-start event"></textEquivalent><code>
      <coding>
        <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="initiate-reporting-workflow"></code>
        <display value="Initiate a reporting workflow"></display>
      </coding>
    </code>
    <trigger id="encounter-start">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-named-eventtype-extension">
        <valueCodeableConcept>
          <coding>
            <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-triggerdefinition-namedevents"></system><code value="encounter-start"></code>
            <display value="Indicates the start of an encounter"></display>
          </coding>
        </valueCodeableConcept>
      </extension>
      <type value="named-event"></type>
      <name value="encounter-start"></name>
    </trigger><input id="patient">
    <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
      <valueString value="Patient/{{context.patientId}}"></valueString>
    </extension>
    <type value="Patient"></type></input><input id="encounter">
    <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
      <valueString value="Encounter/{{context.encounterId}}"></valueString>
    </extension>
    <type value="Encounter"></type></input>
    <relatedAction>
      <actionId value="check-reportable"></actionId>
      <relationship value="before-start"></relationship>
      <offsetDuration>
        <value value="1"></value>
        <system value="http://unitsofmeasure.org"></system><code value="h"></code>
      </offsetDuration>
    </relatedAction>
  </action>
  <action id="check-reportable">
    <description value="This action represents the check for suspected reportability of the eICR."></description>
    <textEquivalent value="Check Reportability and setup jobs for future reportability checks."></textEquivalent><code>
      <coding>
        <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="execute-reporting-workflow"></code>
      </coding>
    </code>
    <action id="is-encounter-reportable">
      <description value="This action represents the check for reportability to create the patients eICR."></description>
      <textEquivalent value="Check Trigger Codes based on RCTC Value sets."></textEquivalent><code>
        <coding>
          <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="check-trigger-codes"></code>
        </coding>
      </code>
      <condition>
        <kind value="applicability"></kind>
        <expression>
          <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-alternative-expression-extension">
            <valueExpression>
              <language value="text/cql-identifier"></language>
              <expression value="Is Reportable"></expression>
              <reference value="http://ersd.aimsplatform.org/fhir/Library/RuleFilters|1.0.0"></reference>
            </valueExpression>
          </extension>
          <language value="text/fhirpath"></language>
          <expression
            value="%conditions.exists() or %encounters.exists() or %immunizations.exists() or %procedures.exists() or %procedureOrders.exists() or %labOrders.exists() or %labTests.exists() or %labResults.exists() or %medicationAdministrations.exists() or %medicationOrders.exists() or %medicationDispenses.exists()">
          </expression>
        </expression>
      </condition><input id="conditions">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="Condition?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="Condition"></type>
      <codeFilter>
        <path value="code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/dxtc"></valueSet>
      </codeFilter></input><input id="encounters">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="encounter"></valueString>
      </extension>
      <type value="Encounter"></type>
      <codeFilter>
        <path value="reasonCode"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/dxtc"></valueSet>
      </codeFilter></input><input id="immunizations">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="Immunization?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="Immunization"></type>
      <codeFilter>
        <path value="vaccineCode"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter></input><input id="labOrders">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="ServiceRequest?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="ServiceRequest"></type>
      <codeFilter>
        <path value="code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/lotc"></valueSet>
      </codeFilter></input><input id="labTests">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="Observation?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="Observation"></type>
      <codeFilter>
        <path value="code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/lotc"></valueSet>
      </codeFilter></input><input id="diagnosticOrders">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="DiagnosticReport?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="DiagnosticReport"></type>
      <codeFilter>
        <path value="code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/lotc"></valueSet>
      </codeFilter></input><input id="procedureOrders">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="ServiceRequest?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="ServiceRequest"></type>
      <codeFilter>
        <path value="code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/pctc"></valueSet>
      </codeFilter></input><input id="procedures">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="Procedure?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="Procedure"></type>
      <codeFilter>
        <path value="code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/pctc"></valueSet>
      </codeFilter></input><input id="medicationOrders">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="MedicationRequest?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="MedicationRequest"></type>
      <codeFilter>
        <path value="medicationCodeableConcept"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter>
      <codeFilter>
        <path value="medicationReference.code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter></input><input id="medicationAdministrations">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="MedicationAdministration?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="MedicationAdministration"></type>
      <codeFilter>
        <path value="medicationCodeableConcept"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter>
      <codeFilter>
        <path value="medicationReference.code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter></input><input id="medicationDispenses">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-fhirquerypattern-extension">
        <valueString value="MedicationDispense?patient=Patient/{{context.patientId}}"></valueString>
      </extension>
      <type value="MedicationDispense"></type>
      <codeFilter>
        <path value="medicationCodeableConcept"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter>
      <codeFilter>
        <path value="medicationReference.code"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/mrtc"></valueSet>
      </codeFilter></input><input id="labResults">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="labTests"></valueString>
      </extension>
      <type value="Observation"></type>
      <codeFilter>
        <path value="valueCodeableConcept"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/ostc"></valueSet>
      </codeFilter></input><input id="diagnosticResults">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="diagnosticOrders"></valueString>
      </extension>
      <type value="DiagnosticReport"></type>
      <codeFilter>
        <path value="result.valueCodeableConcept"></path>
        <valueSet value="http://ersd.aimsplatform.org/fhir/ValueSet/ostc"></valueSet>
      </codeFilter></input>
      <relatedAction>
        <actionId value="report-eicr"></actionId>
        <relationship value="before-start"></relationship>
      </relatedAction>
    </action>
    <action id="check-update-eicr"><code>
        <coding>
          <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="evaluate-condition"></code>
        </coding>
      </code>
      <condition>
        <kind value="applicability"></kind>
        <expression>
          <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-alternative-expression-extension">
            <valueExpression>
              <language value="text/cql-identifier"></language>
              <expression value="Most recent eICR sent over 72 hours ago?"></expression>
              <reference value="http://aphl.org/fhir/ecr/Library/RuleFilters|1.0.0"></reference>
            </valueExpression>
          </extension>
          <language value="text/fhirpath"></language>
          <expression value="%last-eicr.last().composition.date &lt; now() - 72 hours or last-eicr-submitted-date &lt; now() - 72 hours"></expression>
        </expression>
      </condition><input id="last-eicr">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="eicr-report"></valueString>
      </extension>
      <type value="Bundle"></type>
      <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle"></profile></input>
      <relatedAction>
        <actionId value="report-eicr"></actionId>
        <relationship value="before-start"></relationship>
      </relatedAction>
    </action>
    <action id="is-encounter-in-progress"><code>
        <coding>
          <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="evaluate-condition"></code>
        </coding>
      </code>
      <condition>
        <kind value="applicability"></kind>
        <expression>
          <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-alternative-expression-extension">
            <valueExpression>
              <language value="text/cql-identifier"></language>
              <expression value="Is Encounter In Progress or 72h or less after end of encounter?"></expression>
              <reference value="http://aphl.org/fhir/ecr/Library/RuleFilters|1.0.0"></reference>
            </valueExpression>
          </extension>
          <language value="text/fhirpath"></language>
          <expression value="%inprogress-encounter.where(status = 'in-progress' and period.end &lt;= now() - 72 hours)"></expression>
        </expression>
      </condition><input id="inprogress-encounter">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="encounter"></valueString>
      </extension>
      <type value="Encounter"></type></input>
      <relatedAction>
        <actionId value="check-reportable"></actionId>
        <relationship value="before-start"></relationship>
        <offsetDuration>
          <value value="12"></value>
          <system value="http://unitsofmeasure.org"></system><code value="h"></code>
        </offsetDuration>
      </relatedAction>
    </action>
  </action>
  <action id="report-eicr">
    <description value="This action represents the creation, validation and submission of the eICR."></description>
    <textEquivalent value="Create, Validate and Report eICR set of actions"></textEquivalent><code>
      <coding>
        <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="execute-reporting-workflow"></code>
      </coding>
    </code>
    <action id="create-eicr">
      <description value="This action represents the creation of the eICR."></description>
      <textEquivalent value="Create eICR"></textEquivalent><code>
        <coding>
          <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="create-report"></code>
        </coding>
      </code><input id="patient-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="patient"></valueString>
      </extension>
      <type value="Patient"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"></profile></input><input id="condition-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="conditions"></valueString>
      </extension>
      <type value="Condition"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-condition"></profile></input><input id="encounter-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="encounters"></valueString>
      </extension>
      <type value="Encounter"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter"></profile></input><input id="mr-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="medicationOrders"></valueString>
      </extension>
      <type value="MedicationRequest"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-medicationrequest"></profile></input><input id="immz-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="immunizations"></valueString>
      </extension>
      <type value="Immunization"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-immunization"></profile></input><input id="proc-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="procedures"></valueString>
      </extension>
      <type value="Procedure"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-procedure"></profile></input><input id="labResult-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="labResults"></valueString>
      </extension>
      <type value="Observation"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-observation-lab"></profile></input><input id="labOrder-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="labOrders"></valueString>
      </extension>
      <type value="ServiceRequest"></type>
      <profile value="http://hl7.org/fhir/StructureDefinition/ServiceRequest"></profile></input><input id="diagnosticResult-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="diagnosticResults"></valueString>
      </extension>
      <type value="DiagnosticReport"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-diagnosticreport-lab"></profile></input><input id="diagnosticOrder-data">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="diagnosticOrders"></valueString>
      </extension>
      <type value="DiagnosticReport"></type>
      <profile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-diagnosticreport-lab"></profile></input><output id="eicr-report">
        <type value="Bundle"></type>
        <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle"></profile>
      </output>
      <relatedAction>
        <actionId value="validate-eicr"></actionId>
        <relationship value="before-start"></relationship>
      </relatedAction>
    </action>
    <action id="validate-eicr">
      <description value="This action represents the validation of the eICR."></description>
      <textEquivalent value="Validate eICR"></textEquivalent><code>
        <coding>
          <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="validate-report"></code>
        </coding>
      </code><input id="generated-eicr-report">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="eicr-report"></valueString>
      </extension>
      <type value="Bundle"></type>
      <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle"></profile></input><output id="valid-eicr-report">
        <type value="Bundle"></type>
        <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle"></profile>
      </output>
      <relatedAction>
        <actionId value="route-and-send-eicr"></actionId>
        <relationship value="before-start"></relationship>
      </relatedAction>
    </action>
    <action id="route-and-send-eicr">
      <description value="This action represents the routing and sending of the eICR."></description>
      <textEquivalent value="Route and send eICR"></textEquivalent><code>
        <coding>
          <system value="http://hl7.org/fhir/us/ecr/CodeSystem/us-ph-plandefinition-actions"></system><code value="submit-report"></code>
        </coding>
      </code><input id="validated-eicr-report">
      <extension url="http://hl7.org/fhir/us/ecr/StructureDefinition/us-ph-relateddata-extension">
        <valueString value="valid-eicr-report"></valueString>
      </extension>
      <type value="Bundle"></type>
      <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle"></profile></input><output id="submitted-eicr-report">
        <type value="Bundle"></type>
        <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle"></profile>
      </output>
    </action>
  </action>
</PlanDefinition>
